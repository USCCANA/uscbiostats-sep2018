---
title: "Social mimicry and small networks"
author: "George G. Vega Yon"
date: "September 5, 2018"
output: beamer_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, out.width=".8\\linewidth", fig.width=6,
                      fig.align = "center")
```

## Part 1: Social Mimicry

We are trying to model the following behavior:

A type of behavior which is involuntary

Families were invited to a lab to eat together

Each family member was wearing a aaaa that tracked bites.

A bite consists simply in the action of taking food to your mouth

We are interested in two questions

----

1.  Do we observe social mimicry?

2.  If there is any, can we write down a model of social mimicry?

----

* For the first question, right now we are using a permutation test.

* But first, let's take a look a the structure of the data

A DIAGRAM GOES HERE

## Formal description

Mathematically, we can describe the data as follows:

* For each individual $i$ we observe a vector $T_i \equiv\{t^i_1, t^i_2,\dots\}$ with $i$'s bites timestamps. You can think of this as a poisson process.

* Let $n_i$ denote the size of $T_i$.

* Also, define the function $R:T_i\times T_j\mapsto T_j$ as that which returns the **leftmost close** bite of $j$ to $i$, i.e. the inmediate bite of $j$ before $i$ took a particular bite:

$$
R(t_i^n, T_j) = \left\{\begin{array}{l}
\mbox{Undefined},\quad\mbox{if }(\forall t_j^n\in T_j) \exists t_i^m\in T_i \mbox{ s.th. }t_i^m\in(t_j^n,t_i^n) \\
\arg\max_{\{t_j^n:t_j^n\in T_j, t_j^n \leq t_i^n\}}t_i^n - t_j^n,\quad\mbox{otherwise.}
\end{array}\right.
$$
  
  For now we will focus on the cases where this is defined.

---

* A possible statistic is to take the average time gap between $i$ and $j$'s
  bite, formally, assuming $R(t, T_j)$ is defined for all $t\in T_i$, we have


$$
S_{ij} = \frac{1}{n_i}\sum_{t\in T_i}(t - R(t, T_j))
$$

## Data

*   At the dyadic level, we observe two vectors of timestamps (when the bites
    occurred per individual), e.g.
    
    ```{r example-of-dyad, echo=FALSE, cache=TRUE, fig.align='center', fig.cap="Simulated dyad", fig.height=4}
    set.seed(21)
    plot(biteme::simulate_dyad(rates = c(.8, .5)), lwd=10)
    ```
    
*   For the previous example, $T_1 = \{t_1^1, t_1^2, t_1^3, t_1^4, t_1^5, t_1^6\}$,
    and $T_2 = \{t_2^1, t_2^2, t_2^3\}$
    
    $$R(t_2^2, T_1) = t_1^3$$

## Permuting time intervals

*   Imagine we observe the followin: $T_{a} = \{0, 1, 3, 6\}$, then we have 
    $3! = 6$ total permutations as what is swapped are time intervals.
    
    ```{r example-permutations, echo=FALSE, fig.height=4, cache=TRUE, fig.cap="Distribution of permuted set (50,000 permutations)."}
    library(biteme)
    # Function to encode the shuffle
    shuffle_wrap <- function(dat) {
      paste0(shuffle_bites(dat)$times[,1], collapse="")
    }
    
    # Fake data. This has only 6 possible permutations
    dat <- cbind(
      time = c(0, 1, 3, 6),
      ids  = rep(1, 4)
    )
    
    # Tabulating and plotting the permutations
    n <- 5e4
    set.seed(111224)
    ans <- replicate(n, shuffle_wrap(dat))
    ans <- table(ans)/n
    
    # ans
    # ans
    #    0136    0146    0236    0256    0346    0356
    # 0.16842 0.16622 0.16618 0.16794 0.16566 0.16558
    
    # Plotting the distribution
    barplot(ans)
    ```
        


## Part 2: Small Network

* Observe small teams perfoming several tasks in a lab,

* Team members are surveyed before and after each task.

* From their responses, collective intelligence indicators were built.

* Also, they were asked about their perceptions of the social networks: leadership,
  advice, etc. Call this social cognition.
  
We are interested in the following question

----

*   How important is, if important at all, social cognition in group performance?

*   **Our problem**: Teams studied here (and everywhere) are usually very small, 
raging 4 to 5 members.

*   Our current approach: We defined an statistic that measures some sort of correlation:
    
    $$
    S_T\equiv 1-\frac{1}{n(n-1)}\sum_{\{(i, j):(i,j)\in T, i<j\}}H(i,j)
    $$
    
    Where $H(i,j)$ is the hamming distance between $i$ and $j$'s perceived social structures.

*   $S_T\in[0,1]$, where 1 means _perfect correlation_ (all subjects have the exact same perception of the graph.)
